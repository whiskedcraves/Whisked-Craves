
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Whisked Craves — Taste That Matters</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,700;1,400;1,500&family=Jost:wght@200;300;400;500&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --cocoa-deep: #110704; --cocoa: #1e0d06; --choc-dark: #2e1208;
    --caramel: #b87333; --gold: #c9a84c; --gold-light: #e2c97e;
    --cream: #f2e8d9; --cream-dim: rgba(242,232,217,0.6); --cream-mute: rgba(242,232,217,0.35);
  }
  html { scroll-behavior: smooth; }
  body { background: var(--cocoa); color: var(--cream); font-family: 'Jost', sans-serif; font-weight: 300; overflow-x: hidden; }
  body::before {
    content: ''; position: fixed; inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23g)' opacity='0.05'/%3E%3C/svg%3E");
    pointer-events: none; z-index: 999; mix-blend-mode: overlay;
  }

  .wordmark { display: flex; flex-direction: column; align-items: center; gap: 0.15rem; }
  .wm-whisked {
    font-family: 'Playfair Display', serif; font-size: clamp(2.8rem,10vw,6rem);
    font-weight: 400; font-style: italic; letter-spacing: -0.02em; line-height: 1;
    background: linear-gradient(135deg, var(--gold-light) 0%, var(--gold) 40%, var(--caramel) 100%);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  }
  .wm-craves { font-family: 'Jost', sans-serif; font-size: clamp(1rem,3.5vw,2rem); font-weight: 500; letter-spacing: 0.55em; text-transform: uppercase; color: var(--cream); }
  .wm-rule { width: 100%; height: 1px; background: linear-gradient(90deg, transparent, var(--gold), transparent); margin: 0.4rem 0; }
  .wm-tag { font-size: clamp(0.55rem,1.5vw,0.65rem); letter-spacing: 0.5em; text-transform: uppercase; color: rgba(201,168,76,0.7); }

  .eyebrow { font-size: 0.58rem; letter-spacing: 0.5em; text-transform: uppercase; color: var(--gold); margin-bottom: 1.2rem; }
  .sec-title { font-family: 'Playfair Display', serif; font-size: clamp(1.8rem,5vw,3.2rem); font-weight: 400; line-height: 1.2; color: var(--cream); }
  .sec-title em { font-style: italic; color: var(--gold-light); }
  .g-rule { width: 50px; height: 1px; background: linear-gradient(90deg, var(--gold), transparent); margin: 1.8rem 0; }
  .g-rule.c { margin: 1.8rem auto; background: linear-gradient(90deg, transparent, var(--gold), transparent); width: 80px; }

  .hero {
    min-height: 100dvh; display: flex; flex-direction: column;
    align-items: center; justify-content: center; text-align: center; padding: 5rem 2rem 6rem;
    position: relative;
    background: radial-gradient(ellipse 70% 55% at 50% 35%, #3d1a08 0%, transparent 70%),
                radial-gradient(ellipse 40% 40% at 80% 70%, #2a1005 0%, transparent 60%), var(--cocoa-deep);
  }
  .h-eye { font-size: 0.6rem; letter-spacing: 0.5em; text-transform: uppercase; color: var(--gold); margin-bottom: 3rem; opacity: 0; animation: rise 0.9s 0.3s forwards; }
  .h-wm { opacity: 0; animation: rise 1s 0.6s forwards; margin-bottom: 2.5rem; }
  .h-desc { font-size: clamp(0.65rem,1.8vw,0.75rem); letter-spacing: 0.3em; text-transform: uppercase; color: var(--cream-dim); margin-bottom: 3.5rem; opacity: 0; animation: rise 0.9s 0.9s forwards; }
  .h-desc span { display: inline-block; margin: 0 0.8rem; color: var(--gold); font-size: 0.4rem; vertical-align: middle; }
  .h-ctas { display: flex; flex-direction: column; align-items: center; gap: 1rem; opacity: 0; animation: rise 0.9s 1.2s forwards; }
  .btn-gold { display: inline-block; background: linear-gradient(135deg, var(--caramel), var(--gold)); color: var(--cocoa-deep); padding: 1rem 3.5rem; font-family: 'Jost', sans-serif; font-size: 0.7rem; font-weight: 500; letter-spacing: 0.35em; text-transform: uppercase; text-decoration: none; transition: opacity 0.3s, transform 0.3s; border: none; cursor: pointer; }
  .btn-gold:hover { opacity: 0.85; transform: translateY(-2px); }
  .btn-ghost { font-size: 0.6rem; letter-spacing: 0.3em; text-transform: uppercase; color: var(--cream-mute); text-decoration: none; transition: color 0.3s; }
  .btn-ghost:hover { color: var(--cream); }
  .scroll-hint { position: absolute; bottom: 2.5rem; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; gap: 0.6rem; opacity: 0; animation: rise 1s 1.8s forwards; }
  .scroll-line { width: 1px; height: 48px; background: linear-gradient(to bottom, var(--gold), transparent); animation: pulse 2.2s 2s infinite; }
  .scroll-hint span { font-size: 0.5rem; letter-spacing: 0.35em; text-transform: uppercase; color: var(--cream-mute); }

  .drop-section { padding: 5rem 2rem; background: linear-gradient(180deg, var(--cocoa-deep), var(--choc-dark)); border-top: 1px solid rgba(201,168,76,0.2); border-bottom: 1px solid rgba(201,168,76,0.2); }
  .drop-inner { max-width: 760px; margin: 0 auto; }
  #no-drop { text-align: center; }
  .nd-text { font-size: 0.75rem; line-height: 1.9; color: var(--cream-dim); margin-bottom: 2.5rem; }
  .ig-btn { display: inline-flex; align-items: center; gap: 0.7rem; border: 1px solid var(--gold); color: var(--cream); padding: 0.9rem 2.5rem; font-family: 'Jost', sans-serif; font-size: 0.65rem; font-weight: 400; letter-spacing: 0.3em; text-transform: uppercase; text-decoration: none; transition: background 0.3s, color 0.3s; }
  .ig-btn:hover { background: var(--gold); color: var(--cocoa-deep); }
  .ig-btn svg { width: 16px; height: 16px; fill: currentColor; flex-shrink: 0; }

  #active-drop { display: none; text-align: center; }
  .drop-product-name { font-family: 'Playfair Display', serif; font-size: 1.4rem; font-style: italic; color: var(--gold-light); margin-bottom: 0.8rem; }
  .drop-allergen-info { font-size: 0.68rem; color: var(--caramel); margin-bottom: 2.5rem; line-height: 1.7; }
  .drop-qty-display { font-size: 0.7rem; color: var(--cream-mute); margin-bottom: 1.5rem; letter-spacing: 0.2em; text-transform: uppercase; }
  .claim-btn-main { display: inline-block; border: 1px solid var(--gold); color: var(--gold); padding: 0.8rem 2.5rem; font-family: 'Jost', sans-serif; font-size: 0.65rem; letter-spacing: 0.3em; text-transform: uppercase; background: none; cursor: pointer; transition: background 0.3s, color 0.3s; margin-bottom: 0.6rem; }
  .claim-btn-main:hover { background: var(--gold); color: var(--cocoa-deep); }
  .claim-btn-main:disabled { opacity: 0.3; cursor: not-allowed; border-color: var(--cream-mute); color: var(--cream-mute); }
  .claim-btn-main:disabled:hover { background: none; color: var(--cream-mute); }
  .sold-out-label { font-size: 0.6rem; color: var(--caramel); letter-spacing: 0.3em; text-transform: uppercase; }

  .how-section { padding: 7rem 2rem; max-width: 860px; margin: 0 auto; }
  .how-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 3rem; margin-top: 3.5rem; }
  .how-item { display: flex; flex-direction: column; gap: 0.8rem; }
  .how-num { font-family: 'Playfair Display', serif; font-size: 3.5rem; font-weight: 400; color: rgba(201,168,76,0.18); line-height: 1; }
  .how-title { font-family: 'Playfair Display', serif; font-size: 1.1rem; color: var(--cream); }
  .how-desc { font-size: 0.72rem; line-height: 1.9; color: var(--cream-mute); }

  .deposit-section { padding: 5rem 2rem; background: var(--choc-dark); border-top: 1px solid rgba(201,168,76,0.15); border-bottom: 1px solid rgba(201,168,76,0.15); }
  .dep-inner { max-width: 800px; margin: 0 auto; }
  .dep-body { font-size: 0.75rem; line-height: 1.9; color: var(--cream-dim); margin-bottom: 2.5rem; }
  .dep-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
  .dep-card { padding: 1.8rem 1.5rem; border: 1px solid rgba(201,168,76,0.2); }
  .dep-card-title { font-family: 'Playfair Display', serif; font-size: 1rem; color: var(--gold); margin-bottom: 0.6rem; }
  .dep-card-text { font-size: 0.7rem; line-height: 1.8; color: var(--cream-mute); }
  .dep-notice { padding: 1.5rem; border-left: 2px solid var(--gold); background: rgba(201,168,76,0.05); font-size: 0.72rem; line-height: 1.9; color: var(--cream-dim); }
  .dep-notice strong { color: var(--gold); font-weight: 400; }

  .allergy-section { padding: 6rem 2rem; max-width: 960px; margin: 0 auto; }
  .allergy-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin-top: 3rem; }
  .allergy-card { border: 1px solid rgba(201,168,76,0.2); padding: 1.8rem; }
  .ac-name { font-family: 'Playfair Display', serif; font-size: 1rem; color: var(--cream); margin-bottom: 1rem; padding-bottom: 0.8rem; border-bottom: 1px solid rgba(201,168,76,0.15); }
  .ac-pills { display: flex; flex-wrap: wrap; gap: 0.4rem; }
  .ac-pill { padding: 0.25rem 0.7rem; border: 1px solid rgba(201,168,76,0.35); font-size: 0.55rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--cream-dim); }
  .ac-pill.trace { border-color: rgba(184,115,51,0.4); color: var(--caramel); }
  .allergy-warning { margin-top: 3rem; padding: 1.5rem; border-left: 2px solid var(--caramel); background: rgba(184,115,51,0.07); font-size: 0.72rem; line-height: 1.9; color: var(--cream-dim); }
  .allergy-warning strong { color: var(--caramel); font-weight: 400; }

  .preorder-section { padding: 7rem 2rem; background: var(--choc-dark); border-top: 1px solid rgba(201,168,76,0.15); text-align: center; }
  .po-inner { max-width: 800px; margin: 0 auto; }
  .po-terms { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 2rem; margin-top: 3rem; }
  .po-block { display: flex; flex-direction: column; gap: 0.5rem; }
  .po-num { font-family: 'Playfair Display', serif; font-size: 2.5rem; font-weight: 400; color: rgba(201,168,76,0.2); line-height: 1; }
  .po-title { font-family: 'Playfair Display', serif; font-size: 1rem; color: var(--cream); }
  .po-desc { font-size: 0.7rem; line-height: 1.8; color: var(--cream-mute); }
  .po-cta { display: inline-block; margin-top: 3rem; border: 1px solid var(--caramel); color: var(--cream); padding: 0.9rem 2.8rem; font-family: 'Jost', sans-serif; font-size: 0.65rem; letter-spacing: 0.35em; text-transform: uppercase; text-decoration: none; transition: background 0.3s, color 0.3s; }
  .po-cta:hover { background: var(--caramel); color: var(--cocoa-deep); }

  footer { padding: 3.5rem 2rem 2.5rem; text-align: center; border-top: 1px solid rgba(201,168,76,0.15); background: var(--cocoa-deep); }
  .ft-tag { font-size: 0.55rem; letter-spacing: 0.45em; text-transform: uppercase; color: rgba(201,168,76,0.5); margin-top: 0.3rem; }
  .ft-legal { margin-top: 2rem; font-size: 0.58rem; color: var(--cream-mute); line-height: 1.7; }
  .ft-links { display: flex; justify-content: center; gap: 2rem; margin-top: 1.5rem; flex-wrap: wrap; }
  .ft-link { font-size: 0.6rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--cream-mute); text-decoration: none; transition: color 0.3s; }
  .ft-link:hover { color: var(--cream); }

  /* LEGAL PAGES */
  .legal-page { display: none; padding: 5rem 2rem; min-height: 100vh; }
  .legal-page.show { display: block; }
  .legal-inner { max-width: 800px; margin: 0 auto; }
  .legal-back { display: inline-block; margin-bottom: 2rem; font-size: 0.65rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--gold); text-decoration: none; transition: color 0.3s; }
  .legal-back:hover { color: var(--gold-light); }
  .legal-title { font-family: 'Playfair Display', serif; font-size: 2.5rem; color: var(--cream); margin-bottom: 1rem; }
  .legal-updated { font-size: 0.65rem; color: var(--cream-mute); margin-bottom: 3rem; }
  .legal-section { margin-bottom: 2.5rem; }
  .legal-section h2 { font-family: 'Playfair Display', serif; font-size: 1.3rem; color: var(--gold-light); margin-bottom: 1rem; }
  .legal-section p { font-size: 0.75rem; line-height: 1.9; color: var(--cream-dim); margin-bottom: 1rem; }
  .legal-section ul { margin-left: 1.5rem; margin-bottom: 1rem; }
  .legal-section li { font-size: 0.75rem; line-height: 1.9; color: var(--cream-dim); margin-bottom: 0.5rem; }
  .legal-section strong { color: var(--cream); font-weight: 400; }

  /* MODAL */
  .modal-bg { position: fixed; inset: 0; background: rgba(17,7,4,0.95); backdrop-filter: blur(6px); z-index: 200; display: flex; align-items: center; justify-content: center; padding: 1.5rem; opacity: 0; pointer-events: none; transition: opacity 0.35s; }
  .modal-bg.open { opacity: 1; pointer-events: all; }
  .modal-box { background: var(--choc-dark); border: 1px solid rgba(201,168,76,0.3); max-width: 520px; width: 100%; padding: 2.5rem 2rem; position: relative; transform: translateY(20px); transition: transform 0.35s; max-height: 90dvh; overflow-y: auto; }
  .modal-bg.open .modal-box { transform: translateY(0); }
  .modal-x { position: absolute; top: 1rem; right: 1.2rem; background: none; border: none; color: var(--cream-mute); font-size: 1.4rem; cursor: pointer; line-height: 1; }
  .modal-x:hover { color: var(--cream); }
  .m-eye { font-size: 0.58rem; letter-spacing: 0.45em; text-transform: uppercase; color: var(--gold); margin-bottom: 0.5rem; }
  .m-title { font-family: 'Playfair Display', serif; font-size: 1.5rem; color: var(--cream); margin-bottom: 0.3rem; }
  .m-prod { font-family: 'Playfair Display', serif; font-style: italic; font-size: 0.95rem; color: var(--gold-light); margin-bottom: 1.2rem; }
  .m-rule { height: 1px; background: rgba(201,168,76,0.2); margin-bottom: 1.5rem; }

  .claim-form { display: flex; flex-direction: column; gap: 1.2rem; }
  .form-group { display: flex; flex-direction: column; gap: 0.4rem; }
  .form-label { font-size: 0.62rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--cream-dim); }
  .form-input, .form-select { width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(201,168,76,0.25); color: var(--cream); padding: 0.75rem 1rem; font-family: 'Jost', sans-serif; font-size: 0.8rem; outline: none; }
  .form-input:focus, .form-select:focus { border-color: var(--gold); }
  .form-select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8'%3E%3Cpath fill='%23c9a84c' d='M0 0l6 8 6-8z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 1rem center; }
  .form-select option { background: var(--choc-dark); color: var(--cream); }
  
  .form-checkbox-group { display: flex; align-items: flex-start; gap: 0.8rem; padding: 1rem; border: 1px solid rgba(201,168,76,0.2); background: rgba(201,168,76,0.03); }
  .form-checkbox { flex-shrink: 0; width: 18px; height: 18px; margin-top: 0.1rem; cursor: pointer; }
  .form-checkbox-label { font-size: 0.68rem; line-height: 1.7; color: var(--cream-dim); cursor: pointer; }
  .form-checkbox-label strong { color: var(--gold); font-weight: 400; }

  .form-warning { padding: 1rem; border-left: 2px solid var(--gold); background: rgba(201,168,76,0.06); font-size: 0.68rem; line-height: 1.8; color: var(--cream-dim); }
  .form-warning strong { color: var(--gold); font-weight: 400; }

  .form-submit { width: 100%; background: linear-gradient(135deg, var(--caramel), var(--gold)); color: var(--cocoa-deep); padding: 1rem; font-family: 'Jost', sans-serif; font-size: 0.7rem; font-weight: 500; letter-spacing: 0.3em; text-transform: uppercase; border: none; cursor: pointer; transition: opacity 0.3s; }
  .form-submit:hover { opacity: 0.85; }
  .form-submit:disabled { opacity: 0.4; cursor: not-allowed; }

  .form-success { text-align: center; }
  .form-success-icon { font-size: 3rem; color: var(--gold); margin-bottom: 1rem; }
  .form-success-title { font-family: 'Playfair Display', serif; font-size: 1.3rem; color: var(--cream); margin-bottom: 0.8rem; }
  .form-success-text { font-size: 0.72rem; line-height: 1.9; color: var(--cream-dim); margin-bottom: 1.5rem; }
  .form-success-close { display: inline-block; border: 1px solid var(--gold); color: var(--gold); padding: 0.7rem 2rem; font-family: 'Jost', sans-serif; font-size: 0.65rem; letter-spacing: 0.3em; text-transform: uppercase; background: none; cursor: pointer; transition: background 0.3s, color 0.3s; }
  .form-success-close:hover { background: var(--gold); color: var(--cocoa-deep); }

  /* ADMIN */
  #admin-login { display: none; position: fixed; inset: 0; background: rgba(17,7,4,0.97); z-index: 500; align-items: center; justify-content: center; padding: 2rem; }
  #admin-login.show { display: flex; }
  .login-box { background: var(--choc-dark); border: 1px solid rgba(201,168,76,0.3); max-width: 360px; width: 100%; padding: 3rem 2rem; text-align: center; }
  .login-box h2 { font-family: 'Playfair Display', serif; font-size: 1.4rem; color: var(--cream); margin-bottom: 0.4rem; }
  .login-box p { font-size: 0.68rem; color: var(--cream-mute); margin-bottom: 2rem; }
  .login-err { font-size: 0.65rem; color: #e05c5c; margin-bottom: 0.8rem; min-height: 1rem; }

  #admin-panel { display: none; position: fixed; inset: 0; background: var(--cocoa-deep); z-index: 500; overflow-y: auto; }
  #admin-panel.show { display: block; }
  .ap-header { background: var(--choc-dark); padding: 1.5rem 2rem; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid rgba(201,168,76,0.2); position: sticky; top: 0; z-index: 10; flex-wrap: wrap; gap: 1rem; }
  .ap-title { font-family: 'Playfair Display', serif; font-size: 1.2rem; color: var(--cream); }
  .ap-close { background: none; border: 1px solid rgba(201,168,76,0.3); color: var(--cream-mute); padding: 0.5rem 1.2rem; font-family: 'Jost', sans-serif; font-size: 0.62rem; letter-spacing: 0.2em; cursor: pointer; transition: all 0.2s; }
  .ap-close:hover { border-color: var(--gold); color: var(--cream); }
  .ap-body { max-width: 680px; margin: 0 auto; padding: 3rem 2rem; }
  .ap-sec { margin-bottom: 3rem; }
  .ap-sec-title { font-family: 'Playfair Display', serif; font-size: 1.1rem; color: var(--gold); margin-bottom: 1.5rem; padding-bottom: 0.7rem; border-bottom: 1px solid rgba(201,168,76,0.2); }
  .ap-row { display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1.2rem; }
  .ap-label { font-size: 0.62rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--cream-dim); }
  .ap-input, .ap-select { width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(201,168,76,0.25); color: var(--cream); padding: 0.75rem 1rem; font-family: 'Jost', sans-serif; font-size: 0.8rem; outline: none; appearance: none; border-radius: 0; }
  .ap-input:focus, .ap-select:focus { border-color: var(--gold); }
  .ap-select option { background: var(--choc-dark); color: var(--cream); }
  .ap-hint { font-size: 0.62rem; color: var(--cream-mute); line-height: 1.6; margin-top: 0.3rem; }

  .ap-toggle-row { display: flex; align-items: center; justify-content: space-between; padding: 1rem 1.2rem; border: 1px solid rgba(201,168,76,0.2); margin-bottom: 1rem; }
  .ap-toggle-label { font-size: 0.72rem; color: var(--cream-dim); }
  .toggle { position: relative; width: 44px; height: 24px; cursor: pointer; display: inline-block; }
  .toggle input { opacity: 0; width: 0; height: 0; position: absolute; }
  .toggle-track { position: absolute; inset: 0; background: rgba(255,255,255,0.1); border-radius: 12px; transition: background 0.3s; }
  .toggle input:checked + .toggle-track { background: var(--gold); }
  .toggle-thumb { position: absolute; left: 3px; top: 3px; width: 18px; height: 18px; background: white; border-radius: 50%; transition: transform 0.3s; pointer-events: none; }
  .toggle input:checked ~ .toggle-thumb { transform: translateX(20px); }

  .ap-boxes { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.8rem; margin-bottom: 1.2rem; }
  .ap-box-btn { display: flex; flex-direction: column; align-items: center; gap: 0.4rem; padding: 1rem; border: 1px solid rgba(201,168,76,0.2); cursor: pointer; transition: border-color 0.2s, background 0.2s; background: none; }
  .ap-box-btn.active { border-color: var(--gold); background: rgba(201,168,76,0.08); }
  .ap-box-btn span { font-family: 'Playfair Display', serif; font-size: 1.8rem; color: var(--gold); line-height: 1; }
  .ap-box-btn small { font-size: 0.55rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--cream-dim); }

  .ap-claims-list { display: flex; flex-direction: column; gap: 0.6rem; }
  .ap-claim-item { display: flex; align-items: center; justify-content: space-between; padding: 0.9rem 1rem; border: 1px solid rgba(201,168,76,0.15); background: rgba(201,168,76,0.02); }
  .ap-claim-info { font-size: 0.68rem; color: var(--cream-dim); }
  .ap-unclaim-btn { background: none; border: 1px solid var(--caramel); color: var(--caramel); padding: 0.3rem 0.8rem; font-family: 'Jost', sans-serif; font-size: 0.55rem; letter-spacing: 0.15em; cursor: pointer; transition: all 0.2s; }
  .ap-unclaim-btn:hover { background: var(--caramel); color: var(--cocoa-deep); }

  .ap-save { display: block; width: 100%; background: linear-gradient(135deg, var(--caramel), var(--gold)); color: var(--cocoa-deep); border: none; padding: 1rem; font-family: 'Jost', sans-serif; font-size: 0.75rem; font-weight: 500; letter-spacing: 0.3em; text-transform: uppercase; cursor: pointer; transition: opacity 0.3s; margin-top: 1rem; }
  .ap-save:hover { opacity: 0.85; }
  .ap-saved { text-align: center; font-size: 0.65rem; color: #6fcf7d; letter-spacing: 0.2em; margin-top: 0.8rem; min-height: 1.2rem; }

  @keyframes rise { from { opacity:0; transform:translateY(22px); } to { opacity:1; transform:translateY(0); } }
  @keyframes pulse { 0%,100%{opacity:1;transform:scaleY(1);}50%{opacity:0.25;transform:scaleY(0.5);} }

  @media(max-width:600px){ .modal-box{padding:2rem 1.2rem;} .ap-body{padding:2rem 1rem;} .legal-inner{padding:0 1rem;} }
</style>
</head>
<body>

<!-- MAIN PAGE -->
<div id="main-page">

<!-- ADMIN LOGIN -->
<div id="admin-login">
  <div class="login-box">
    <h2>Admin Access</h2>
    <p>Whisked Craves drop management</p>
    <input class="form-input" type="password" id="pw-input" placeholder="Enter password" onkeydown="if(event.key==='Enter')checkPw()">
    <div class="login-err" id="pw-err"></div>
    <button class="btn-gold" style="width:100%" onclick="checkPw()">Enter</button>
  </div>
</div>

<!-- ADMIN PANEL -->
<div id="admin-panel">
  <div class="ap-header">
    <span class="ap-title">Drop Manager — Whisked Craves</span>
    <button class="ap-close" onclick="closeAdmin()">✕ Close</button>
  </div>
  <div class="ap-body">
    <div class="ap-sec">
      <div class="ap-sec-title">Drop Status</div>
      <div class="ap-toggle-row">
        <span class="ap-toggle-label">Drop is currently live</span>
        <label class="toggle">
          <input type="checkbox" id="drop-live-toggle">
          <div class="toggle-track"></div>
          <div class="toggle-thumb"></div>
        </label>
      </div>
    </div>
    <div class="ap-sec">
      <div class="ap-sec-title">Drop Details</div>
      <div class="ap-row">
        <label class="ap-label">Product</label>
        <select class="ap-select" id="ap-product">
          <option>Orange Choc Cupcakes</option>
          <option>Dairy Milk Choc Cupcakes</option>
          <option>Kinder Choc Cupcakes</option>
          <option>Nutella Choc Cupcakes</option>
          <option>Galaxy Ripple Choc Cupcakes</option>
          <option>Dairy Milk Brownies</option>
          <option>Orange Choc Brownies</option>
        </select>
      </div>
      <div class="ap-row">
        <label class="ap-label">Box Size</label>
        <div class="ap-boxes">
          <button type="button" class="ap-box-btn" id="box-4" onclick="selectBoxSize(4)"><span>4</span><small>Box of 4</small></button>
          <button type="button" class="ap-box-btn" id="box-6" onclick="selectBoxSize(6)"><span>6</span><small>Box of 6</small></button>
          <button type="button" class="ap-box-btn" id="box-12" onclick="selectBoxSize(12)"><span>12</span><small>Box of 12</small></button>
        </div>
      </div>
      <div class="ap-row">
        <label class="ap-label">Total Boxes Available</label>
        <input class="ap-input" type="number" id="ap-qty" min="1" max="20" placeholder="e.g. 4">
      </div>
      <div class="ap-row">
        <label class="ap-label">Your Email (for claim notifications)</label>
        <input class="ap-input" type="email" id="ap-email" placeholder="your@email.com">
        <p class="ap-hint">You'll receive an email every time someone claims a box</p>
      </div>
    </div>
    <div class="ap-sec">
      <div class="ap-sec-title">Current Claims</div>
      <div id="claims-list" class="ap-claims-list"></div>
    </div>
    <button class="ap-save" onclick="saveAdmin()">Save &amp; Update Page</button>
    <div class="ap-saved" id="ap-saved-msg"></div>
  </div>
</div>

<!-- CLAIM MODAL -->
<div class="modal-bg" id="modal">
  <div class="modal-box">
    <button class="modal-x" onclick="closeModal()">✕</button>
    <div id="modal-form-view">
      <p class="m-eye">Claim Your Box</p>
      <h2 class="m-title" id="m-title">Box of 12</h2>
      <p class="m-prod" id="m-prod">Product Name</p>
      <div class="m-rule"></div>
      <form class="claim-form" onsubmit="submitClaim(event)">
        <div class="form-group">
          <label class="form-label">Full Name</label>
          <input class="form-input" type="text" id="claim-name" required>
        </div>
        <div class="form-group">
          <label class="form-label">Email Address</label>
          <input class="form-input" type="email" id="claim-email" required>
        </div>
        <div class="form-group">
          <label class="form-label">Phone Number</label>
          <input class="form-input" type="tel" id="claim-phone" required>
        </div>
        <div class="form-group">
          <label class="form-label">How many boxes?</label>
          <select class="form-select" id="claim-qty" required></select>
        </div>
        <div class="form-checkbox-group">
          <input class="form-checkbox" type="checkbox" id="claim-allergen-check" required>
          <label class="form-checkbox-label" for="claim-allergen-check">
            <strong>I confirm</strong> I have read the allergen information for this product and have no allergies or intolerances to any listed ingredients, OR I accept full responsibility.
          </label>
        </div>
        <div class="form-warning">
          <strong>Important:</strong> Your box is reserved upon submission. Deposit details will be sent within 24 hours. Deposit must be received within 24 hours of our contact or your reservation will be cancelled.
        </div>
        <button class="form-submit" type="submit" id="claim-submit-btn">Reserve Box</button>
      </form>
    </div>
    <div id="modal-success-view" style="display:none;">
      <div class="form-success">
        <div class="form-success-icon">✓</div>
        <h3 class="form-success-title">Claim Received</h3>
        <p class="form-success-text">
          Your box has been reserved. We will contact you within 24 hours with deposit details.<br><br>
          <strong style="color:var(--gold);">Remember:</strong> Deposit must be received within 24 hours of our contact or your reservation will be cancelled.
        </p>
        <button class="form-success-close" onclick="closeModal()">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- HERO -->
<section class="hero">
  <p class="h-eye">Small batch · Handmade · Drop model</p>
  <div class="h-wm">
    <div class="wordmark">
      <div class="wm-whisked">Whisked</div>
      <div class="wm-rule"></div>
      <div class="wm-craves">Craves</div>
      <div class="wm-rule"></div>
      <div class="wm-tag">Taste That Matters</div>
    </div>
  </div>
  <p class="h-desc">Brownies <span>◆</span> Cupcakes <span>◆</span> Handmade to Order</p>
  <div class="h-ctas">
    <a class="btn-gold" href="#drop-section">See Current Drop</a>
    <a class="btn-ghost" href="#how-it-works">How it works ↓</a>
  </div>
  <div class="scroll-hint">
    <div class="scroll-line"></div>
    <span>Scroll</span>
  </div>
</section>

<!-- DROP SECTION -->
<section class="drop-section" id="drop-section">
  <div class="drop-inner">
    <div id="no-drop">
      <p class="eyebrow">Current Drop</p>
      <h2 class="sec-title" style="margin-bottom:1.5rem;">No Drop <em>Live Yet</em></h2>
      <p class="nd-text">We don't have an active drop right now. Follow us on Instagram to be the first to know when the next one goes live.</p>
      <a class="ig-btn" href="https://instagram.com/whiskedcraves" target="_blank" rel="noopener">
        <svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
        Follow on Instagram
      </a>
    </div>
    <div id="active-drop"></div>
  </div>
</section>

<!-- HOW IT WORKS -->
<section class="how-section" id="how-it-works">
  <p class="eyebrow">The Process</p>
  <h2 class="sec-title">How <em>Drops Work</em></h2>
  <div class="how-grid">
    <div class="how-item"><div class="how-num">01</div><div class="how-title">Follow Us</div><div class="how-desc">Drops are announced on Instagram. Follow us so you never miss when a drop goes live.</div></div>
    <div class="how-item"><div class="how-num">02</div><div class="how-title">Claim Your Box</div><div class="how-desc">When a drop is live, reserve your box through our website. Fill in the form and confirm allergen information.</div></div>
    <div class="how-item"><div class="how-num">03</div><div class="how-title">Pay Deposit</div><div class="how-desc">We contact you within 24 hours with deposit details. Deposit must be received within 24 hours of our contact.</div></div>
    <div class="how-item"><div class="how-num">04</div><div class="how-title">Collection</div><div class="how-desc">Once deposit received, we bake your box fresh. Collection details confirmed directly.</div></div>
  </div>
</section>

<!-- DEPOSIT -->
<section class="deposit-section">
  <div class="dep-inner">
    <p class="eyebrow">Deposit Policy</p>
    <h2 class="sec-title" style="margin-bottom:1.5rem;">Our <em>Terms</em></h2>
    <p class="dep-body">Every order requires a non-refundable deposit. This protects the time, ingredients and care that go into every single box. Please only claim if you are genuinely intending to collect.</p>
    <div class="dep-cards">
      <div class="dep-card"><div class="dep-card-title">Drop Boxes (4, 6 &amp; 12)</div><div class="dep-card-text">Deposit required within 24 hours of our contact. Your box is not confirmed until deposit is received. Deposits are non-refundable.</div></div>
      <div class="dep-card"><div class="dep-card-title">Large Orders (32+)</div><div class="dep-card-text">50% non-refundable deposit required to book your date. Balance paid on collection. Minimum 2 weeks lead time required.</div></div>
    </div>
    <div class="dep-notice"><strong>Non-collection —</strong> If you fail to collect after paying a deposit, the deposit is not returned. If circumstances change, please contact us as early as possible.</div>
  </div>
</section>

<!-- ALLERGENS -->
<section class="allergy-section">
  <p class="eyebrow">Allergen Information</p>
  <h2 class="sec-title">Know What's <em>Inside</em></h2>
  <div class="g-rule"></div>
  <p style="font-size:0.75rem;line-height:1.9;color:var(--cream-dim);max-width:600px;">
    All products are handmade in a home kitchen. Allergens are listed per product below.
    Anyone with a food allergy or intolerance should not consume our products without contacting us first.
  </p>
  <div class="allergy-grid">
    <div class="allergy-card">
      <div class="ac-name">Orange Choc Cupcakes</div>
      <div class="ac-pills">
        <span class="ac-pill">Gluten</span><span class="ac-pill">Eggs</span><span class="ac-pill">Milk</span><span class="ac-pill">Mustard</span><span class="ac-pill">Soya</span>
        <span class="ac-pill trace">May contain Tree Nuts</span>
        <span class="ac-pill trace">May contain Fish</span>
      </div>
    </div>
    <div class="allergy-card">
      <div class="ac-name">Dairy Milk Choc Cupcakes</div>
      <div class="ac-pills">
        <span class="ac-pill">Gluten</span><span class="ac-pill">Eggs</span><span class="ac-pill">Milk</span><span class="ac-pill">Mustard</span><span class="ac-pill">Soya</span>
        <span class="ac-pill trace">May contain Tree Nuts</span>
        <span class="ac-pill trace">May contain Fish</span>
      </div>
    </div>
    <div class="allergy-card">
      <div class="ac-name">Kinder Choc Cupcakes</div>
      <div class="ac-pills">
        <span class="ac-pill">Gluten</span><span class="ac-pill">Eggs</span><span class="ac-pill">Milk</span><span class="ac-pill">Mustard</span><span class="ac-pill">Soya</span><span class="ac-pill">Tree Nuts</span>
        <span class="ac-pill trace">May contain Fish</span>
      </div>
    </div>
    <div class="allergy-card">
      <div class="ac-name">Nutella Choc Cupcakes</div>
      <div class="ac-pills">
        <span class="ac-pill">Gluten</span><span class="ac-pill">Eggs</span><span class="ac-pill">Milk</span><span class="ac-pill">Mustard</span><span class="ac-pill">Soya</span><span class="ac-pill">Tree Nuts</span>
        <span class="ac-pill trace">May contain Fish</span>
      </div>
    </div>
    <div class="allergy-card">
      <div class="ac-name">Galaxy Ripple Choc Cupcakes</div>
      <div class="ac-pills">
        <span class="ac-pill">Gluten</span><span class="ac-pill">Eggs</span><span class="ac-pill">Milk</span><span class="ac-pill">Mustard</span><span class="ac-pill">Soya</span>
        <span class="ac-pill trace">May contain Tree Nuts</span>
        <span class="ac-pill trace">May contain Fish</span>
      </div>
    </div>
    <div class="allergy-card">
      <div class="ac-name">Dairy Milk Brownies</div>
      <div class="ac-pills">
        <span class="ac-pill">Gluten</span><span class="ac-pill">Eggs</span><span class="ac-pill">Milk</span><span class="ac-pill">Mustard</span><span class="ac-pill">Soya</span>
        <span class="ac-pill trace">May contain Tree Nuts</span>
        <span class="ac-pill trace">May contain Fish</span>
      </div>
    </div>
    <div class="allergy-card">
      <div class="ac-name">Orange Choc Brownies</div>
      <div class="ac-pills">
        <span class="ac-pill">Gluten</span><span class="ac-pill">Eggs</span><span class="ac-pill">Milk</span><span class="ac-pill">Mustard</span><span class="ac-pill">Soya</span>
        <span class="ac-pill trace">May contain Tree Nuts</span>
        <span class="ac-pill trace">May contain Fish</span>
      </div>
    </div>
  </div>
  <div class="allergy-warning">
    <strong>Important —</strong> Our products are not suitable for anyone with a food allergy or intolerance
    to the allergens listed above. All products are made in a home kitchen that handles these allergens.
    We cannot guarantee the absence of traces. If you have any concerns whatsoever,
    please contact us <strong>before ordering.</strong>
  </div>
</section>

<!-- PRE-ORDER -->
<section class="preorder-section">
  <div class="po-inner">
    <p class="eyebrow">Large Orders</p>
    <h2 class="sec-title">Need <em>32 or More?</em></h2>
    <div class="g-rule c"></div>
    <p style="font-size:0.75rem;line-height:1.9;color:var(--cream-dim);">Events, occasions, corporate gifting. Large orders are pre-order only — planned in advance so every box receives the same care as the first.</p>
    <div class="po-terms">
      <div class="po-block"><div class="po-num">01</div><div class="po-title">Enquire First</div><div class="po-desc">Message us with your date, quantity and product. We confirm availability.</div></div>
      <div class="po-block"><div class="po-num">02</div><div class="po-title">50% Deposit</div><div class="po-desc">Non-refundable deposit secures your date. Balance due on collection.</div></div>
      <div class="po-block"><div class="po-num">03</div><div class="po-title">2 Weeks Notice</div><div class="po-desc">Minimum 2 weeks lead time required. Last-minute requests cannot be guaranteed.</div></div>
      <div class="po-block"><div class="po-num">04</div><div class="po-title">Fixed Menu</div><div class="po-desc">Bespoke requests are quoted separately and may incur an additional cost.</div></div>
    </div>
    <a class="po-cta" href="https://instagram.com/whiskedcraves" target="_blank" rel="noopener">Enquire via Instagram</a>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="wordmark" style="display:inline-flex;flex-direction:column;align-items:center;gap:0.1rem;">
    <div class="wm-whisked" style="font-size:2rem;">Whisked</div>
    <div class="wm-rule" style="width:120px;"></div>
    <div class="wm-craves" style="font-size:0.75rem;">Craves</div>
  </div>
  <p class="ft-tag">Taste That Matters</p>
  <div class="ft-links">
    <a class="ft-link" href="#" onclick="showLegalPage(event, 'privacy')">Privacy Policy</a>
    <a class="ft-link" href="#" onclick="showLegalPage(event, 'terms')">Terms &amp; Conditions</a>
  </div>
  <p class="ft-legal">
    All products handmade in a home kitchen · Allergens listed per product above<br>
    Deposits are non-refundable · Drops are first come, first served
  </p>
</footer>

</div>

<!-- PRIVACY POLICY PAGE -->
<div class="legal-page" id="privacy-page">
  <div class="legal-inner">
    <a class="legal-back" href="#" onclick="hideLegalPages(event)">← Back to Home</a>
    <h1 class="legal-title">Privacy Policy</h1>
    <p class="legal-updated">Last updated: February 2026</p>

    <div class="legal-section">
      <h2>Who We Are</h2>
      <p>Whisked Craves is a home-based bakery business operating in Huddersfield, UK. This privacy policy explains how we collect, use, and protect your personal information.</p>
    </div>

    <div class="legal-section">
      <h2>What Information We Collect</h2>
      <p>When you claim a box through our website, we collect:</p>
      <ul>
        <li>Your full name</li>
        <li>Email address</li>
        <li>Phone number</li>
        <li>Quantity of boxes claimed</li>
      </ul>
      <p>This information is collected solely to process your order and contact you regarding deposit payment and collection.</p>
    </div>

    <div class="legal-section">
      <h2>How We Use Your Information</h2>
      <p>We use your information to:</p>
      <ul>
        <li>Contact you within 24 hours with deposit payment details</li>
        <li>Confirm receipt of your deposit</li>
        <li>Arrange collection details</li>
        <li>Fulfill your order</li>
      </ul>
      <p><strong>We do not use your information for marketing purposes.</strong> We will only contact you regarding your specific order.</p>
    </div>

    <div class="legal-section">
      <h2>How We Store Your Information</h2>
      <p>Your information is stored securely and is only accessible by the business owner. We retain your information only for as long as necessary to complete your order and for reasonable record-keeping purposes (typically up to 12 months).</p>
    </div>

    <div class="legal-section">
      <h2>Your Rights</h2>
      <p>Under UK GDPR, you have the right to:</p>
      <ul>
        <li>Request access to your personal data</li>
        <li>Request correction of your personal data</li>
        <li>Request deletion of your personal data</li>
        <li>Object to processing of your personal data</li>
      </ul>
      <p>To exercise any of these rights, please contact us via Instagram @whiskedcraves.</p>
    </div>

    <div class="legal-section">
      <h2>Data Sharing</h2>
      <p>We do not sell, trade, or share your personal information with third parties. Your data is used exclusively for order fulfillment.</p>
    </div>

    <div class="legal-section">
      <h2>Cookies</h2>
      <p>Our website does not use cookies or tracking technologies.</p>
    </div>

    <div class="legal-section">
      <h2>Contact Us</h2>
      <p>If you have any questions about this privacy policy or how we handle your data, please contact us via Instagram: <strong>@whiskedcraves</strong></p>
    </div>
  </div>
</div>

<!-- TERMS & CONDITIONS PAGE -->
<div class="legal-page" id="terms-page">
  <div class="legal-inner">
    <a class="legal-back" href="#" onclick="hideLegalPages(event)">← Back to Home</a>
    <h1 class="legal-title">Terms &amp; Conditions</h1>
    <p class="legal-updated">Last updated: February 2026</p>

    <div class="legal-section">
      <h2>Agreement to Terms</h2>
      <p>By claiming a box through our website, you agree to these terms and conditions. If you do not agree, please do not place an order.</p>
    </div>

    <div class="legal-section">
      <h2>Orders and Deposits</h2>
      <p><strong>Drop Boxes (4, 6, and 12):</strong></p>
      <ul>
        <li>Submitting a claim form reserves your box</li>
        <li>We will contact you within 24 hours with deposit payment details</li>
        <li>Deposit must be received within 24 hours of our contact</li>
        <li>Your box is not confirmed until deposit is received</li>
        <li>All deposits are non-refundable</li>
      </ul>

      <p><strong>Large Orders (32+):</strong></p>
      <ul>
        <li>Minimum 2 weeks advance notice required</li>
        <li>50% non-refundable deposit required to secure your date</li>
        <li>Balance due on collection</li>
        <li>Bespoke requests quoted separately</li>
      </ul>
    </div>

    <div class="legal-section">
      <h2>Refund and Cancellation Policy</h2>
      <p><strong>All deposits are non-refundable.</strong> This policy protects the time, ingredients, and preparation that go into every order.</p>
      <p>If you fail to collect your order after paying a deposit, the deposit will not be returned. If circumstances change, please contact us as early as possible to discuss options.</p>
    </div>

    <div class="legal-section">
      <h2>Allergen Information and Liability</h2>
      <p>All allergen information for our products is clearly displayed on our website. It is your responsibility to review this information before placing an order.</p>
      <p><strong>Important:</strong> All products are made in a home kitchen that handles multiple allergens including gluten, eggs, milk, mustard, soya, tree nuts, and fish. We cannot guarantee the absence of cross-contamination.</p>
      <p>If you have a food allergy or intolerance, you must contact us before ordering. By placing an order, you confirm that either:</p>
      <ul>
        <li>You have no allergies or intolerances to the listed ingredients, OR</li>
        <li>You accept full responsibility for consuming the product despite your allergy</li>
      </ul>
      <p>We are not liable for any allergic reactions resulting from consumption of our products.</p>
    </div>

    <div class="legal-section">
      <h2>Food Safety</h2>
      <p>Whisked Craves is registered with the local council as a home food business and operates under Level 2 Food Hygiene certification. All products are prepared in accordance with UK food safety regulations.</p>
    </div>

    <div class="legal-section">
      <h2>Collection</h2>
      <p>All orders are for collection only. Collection details will be provided once your deposit is confirmed. You must collect your order at the agreed time. Failure to collect will result in forfeiture of your deposit.</p>
    </div>

    <div class="legal-section">
      <h2>Product Availability</h2>
      <p>Drop boxes are available on a first-come, first-served basis. Once a drop sells out, no additional boxes will be available until the next drop is announced.</p>
    </div>

    <div class="legal-section">
      <h2>Pricing</h2>
      <p>All prices are as stated on the website at the time of ordering. We reserve the right to change prices between drops, but any order placed will honor the price quoted at the time of claiming.</p>
    </div>

    <div class="legal-section">
      <h2>Limitation of Liability</h2>
      <p>To the fullest extent permitted by law, Whisked Craves is not liable for any indirect, incidental, or consequential damages arising from your use of our products or website.</p>
    </div>

    <div class="legal-section">
      <h2>Changes to Terms</h2>
      <p>We reserve the right to modify these terms at any time. Changes will be posted on this page with an updated date. Continued use of our services after changes constitutes acceptance of the new terms.</p>
    </div>

    <div class="legal-section">
      <h2>Contact</h2>
      <p>If you have any questions about these terms, please contact us via Instagram: <strong>@whiskedcraves</strong></p>
    </div>
  </div>
</div>

<script>
// ALLERGEN DATA
const ALLERGENS = {
  'Orange Choc Cupcakes':        'Gluten, Eggs, Milk, Mustard, Soya. May contain Tree Nuts, Fish.',
  'Dairy Milk Choc Cupcakes':    'Gluten, Eggs, Milk, Mustard, Soya. May contain Tree Nuts, Fish.',
  'Kinder Choc Cupcakes':        'Gluten, Eggs, Milk, Mustard, Soya, Tree Nuts. May contain Fish.',
  'Nutella Choc Cupcakes':       'Gluten, Eggs, Milk, Mustard, Soya, Tree Nuts. May contain Fish.',
  'Galaxy Ripple Choc Cupcakes': 'Gluten, Eggs, Milk, Mustard, Soya. May contain Tree Nuts, Fish.',
  'Dairy Milk Brownies':         'Gluten, Eggs, Milk, Mustard, Soya. May contain Tree Nuts, Fish.',
  'Orange Choc Brownies':        'Gluten, Eggs, Milk, Mustard, Soya. May contain Tree Nuts, Fish.',
};

const ADMIN_PW = 'whisked2024';

let state = {
  dropLive: false,
  product: 'Orange Choc Cupcakes',
  boxSize: null,
  totalQty: 0,
  adminEmail: '',
  claims: []
};

try {
  const s = localStorage.getItem('wc_state');
  if(s) state = JSON.parse(s);
} catch(e){}

function save() {
  try { localStorage.setItem('wc_state', JSON.stringify(state)); } catch(e){}
}

function renderDrop() {
  const noDrop = document.getElementById('no-drop');
  const activeDrop = document.getElementById('active-drop');
  
  if (!state.dropLive || !state.boxSize || state.totalQty < 1) {
    noDrop.style.display = 'block';
    activeDrop.style.display = 'none';
    return;
  }

  noDrop.style.display = 'none';
  activeDrop.style.display = 'block';

  const allergenStr = ALLERGENS[state.product] || '';
  const totalClaimed = state.claims.reduce((sum, c) => sum + c.qty, 0);
  const remaining = state.totalQty - totalClaimed;
  const soldOut = remaining <= 0;

  activeDrop.innerHTML = `
    <p class="eyebrow">Current Drop</p>
    <h2 class="sec-title" style="margin-bottom:1rem;">What's <em>Available</em></h2>
    <div class="drop-product-name">${state.product}</div>
    <div class="drop-allergen-info">Contains: ${allergenStr}</div>
    ${!soldOut ? `<div class="drop-qty-display">${remaining} ${remaining===1?'box':'boxes'} remaining</div>` : ''}
    <button class="claim-btn-main" ${soldOut?'disabled':''} onclick="${soldOut?'':`openClaimModal()`}">
      ${soldOut ? 'Sold Out' : 'Claim Your Box'}
    </button>
    ${soldOut ? '<div class="sold-out-label">All boxes claimed</div>' : ''}
  `;
}

function openClaimModal() {
  const totalClaimed = state.claims.reduce((sum, c) => sum + c.qty, 0);
  const remaining = state.totalQty - totalClaimed;
  if (remaining <= 0) return;

  document.getElementById('m-title').textContent = `Box of ${state.boxSize}`;
  document.getElementById('m-prod').textContent = state.product;

  const qtySelect = document.getElementById('claim-qty');
  qtySelect.innerHTML = '';
  for (let i = 1; i <= remaining; i++) {
    const opt = document.createElement('option');
    opt.value = i;
    opt.textContent = `${i} ${i===1?'box':'boxes'}`;
    qtySelect.appendChild(opt);
  }

  document.getElementById('modal-form-view').style.display = 'block';
  document.getElementById('modal-success-view').style.display = 'none';
  document.getElementById('modal').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  document.getElementById('modal').classList.remove('open');
  document.body.style.overflow = '';
  document.getElementById('claim-name').value = '';
  document.getElementById('claim-email').value = '';
  document.getElementById('claim-phone').value = '';
  document.getElementById('claim-allergen-check').checked = false;
}

document.getElementById('modal').addEventListener('click', e => {
  if (e.target === document.getElementById('modal')) closeModal();
});

function submitClaim(e) {
  e.preventDefault();
  
  const name = document.getElementById('claim-name').value.trim();
  const email = document.getElementById('claim-email').value.trim();
  const phone = document.getElementById('claim-phone').value.trim();
  const qty = parseInt(document.getElementById('claim-qty').value);

  const claim = {name, email, phone, qty, timestamp: Date.now()};
  state.claims.push(claim);
  save();
  renderDrop();

  if (state.adminEmail) {
    const formData = new FormData();
    formData.append('_subject', `New Claim: ${state.product}`);
    formData.append('_template', 'box');
    formData.append('Name', name);
    formData.append('Email', email);
    formData.append('Phone', phone);
    formData.append('Quantity', qty);
    formData.append('Product', state.product);
    formData.append('Box Size', state.boxSize);

    fetch(`https://formsubmit.co/${state.adminEmail}`, {
      method: 'POST',
      body: formData
    }).catch(err => console.log('Email send failed:', err));
  }

  document.getElementById('modal-form-view').style.display = 'none';
  document.getElementById('modal-success-view').style.display = 'block';
}

function checkAdminUrl() {
  if (window.location.search.toLowerCase().includes('admin')) {
    document.getElementById('admin-login').classList.add('show');
    setTimeout(() => document.getElementById('pw-input').focus(), 200);
  }
}

function checkPw() {
  if (document.getElementById('pw-input').value === ADMIN_PW) {
    document.getElementById('admin-login').classList.remove('show');
    openAdminPanel();
  } else {
    document.getElementById('pw-err').textContent = 'Incorrect password.';
    document.getElementById('pw-input').value = '';
  }
}

function openAdminPanel() {
  document.getElementById('drop-live-toggle').checked = state.dropLive;
  document.getElementById('ap-product').value = state.product;
  document.getElementById('ap-qty').value = state.totalQty || '';
  document.getElementById('ap-email').value = state.adminEmail || '';
  
  [4,6,12].forEach(s => {
    const el = document.getElementById(`box-${s}`);
    el.classList.toggle('active', state.boxSize === s);
  });

  renderClaimsList();
  document.getElementById('admin-panel').classList.add('show');
  document.body.style.overflow = 'hidden';
}

function closeAdmin() {
  document.getElementById('admin-panel').classList.remove('show');
  document.getElementById('admin-login').classList.remove('show');
  document.body.style.overflow = '';
  history.replaceState(null, '', window.location.pathname);
}

function selectBoxSize(size) {
  state.boxSize = size;
  [4,6,12].forEach(s => {
    document.getElementById(`box-${s}`).classList.toggle('active', s === size);
  });
}

function renderClaimsList() {
  const list = document.getElementById('claims-list');
  if (!state.claims.length) {
    list.innerHTML = '<p style="font-size:0.68rem;color:var(--cream-mute);">No claims yet.</p>';
    return;
  }
  
  let html = '';
  state.claims.forEach((c, i) => {
    html += `<div class="ap-claim-item">
      <div class="ap-claim-info">${c.name} · ${c.qty} ${c.qty===1?'box':'boxes'} · ${c.email}</div>
      <button class="ap-unclaim-btn" onclick="unclaimBox(${i})">Remove</button>
    </div>`;
  });
  list.innerHTML = html;
}

function unclaimBox(index) {
  if (!confirm('Remove this claim? This cannot be undone.')) return;
  state.claims.splice(index, 1);
  save();
  renderClaimsList();
  renderDrop();
}

function saveAdmin() {
  state.dropLive = document.getElementById('drop-live-toggle').checked;
  state.product = document.getElementById('ap-product').value;
  state.totalQty = parseInt(document.getElementById('ap-qty').value) || 0;
  state.adminEmail = document.getElementById('ap-email').value.trim();
  
  save();
  renderDrop();
  
  const msg = document.getElementById('ap-saved-msg');
  msg.textContent = '✓ Page updated successfully';
  setTimeout(() => msg.textContent = '', 3000);
}

function showLegalPage(e, page) {
  e.preventDefault();
  document.getElementById('main-page').style.display = 'none';
  if (page === 'privacy') {
    document.getElementById('privacy-page').classList.add('show');
  } else if (page === 'terms') {
    document.getElementById('terms-page').classList.add('show');
  }
  window.scrollTo(0, 0);
}

function hideLegalPages(e) {
  e.preventDefault();
  document.getElementById('privacy-page').classList.remove('show');
  document.getElementById('terms-page').classList.remove('show');
  document.getElementById('main-page').style.display = 'block';
  window.scrollTo(0, 0);
}

document.addEventListener('keydown', e => {
  if (e.key === 'Escape') { closeModal(); closeAdmin(); }
});

renderDrop();
checkAdminUrl();
</script>
</body>
</html>
